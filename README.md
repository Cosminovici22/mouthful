# Mouthful

Mouthful is an ASCII-only compatible lexer designed for space efficiency. As of
now, Mouthful does not generate lexers for regular expressions, only words.

The project consists of two components:
1. mfgen: generates the lexer for a given list of tokens
2. mftok: tokenizes text using a lexer generated by mfgen

## Project structure

* `docs/`: documentation and usage
* `include/`: public headers for the mftok API
* `src/`: all compilable source files
* `tests/`: testing inputs and scripts

## Space efficiency

The lexer generated by mfgen is a deterministic finite automaton, with two
optimizations made for the sake of space efficiency. The biggest drawback of
DFAs reside in the size of the transition table. These are two-dimensional
tables which formally have as many rows as states and as many columns as symbols
in the alphabet. The following optimization strategies serve to reduce the
length of the rows in the transition table, turning it into what is better
described as a list of transition vectors, as opposed to a table.

The first optimization encodes the symbols of the alphabet relative to the
symbols which appear before them in the accepted words. That is, the transition
table of a state reached by means of input X will have as many entries as there
are symbols which succeed X in any accepted word plus one. The "plus one" is the
transition for inputs which do not succeed X in any accepted word, i.e. to the
error state. Each symbol has an encoding table which encodes succeeding symbols,
resulting in an NxN matrix, where N is the size of the alphabet, i.e. the ASCII
character set. As an example, if a DFA must only accept the words "abracadabra"
and "avadakedavra", the states reached with input 'a' will have a transition
table of size 6, corresponding to symbols 'b`, 'c', 'd', 'v', 'k', which succeed
'a' in the two accepted words and other, for symbols which never succeed 'a'.

The second optimization reduces the size of the DFA alphabet by only considering
the symbols which appear in the accepted words, as opposed to all 128 ASCII
characters. This is done by encoding the ASCII character set. The resulting
encoding table must be saved alongside the DFA transition table for later use.
The purpose of this optimization is to reduce the size of the encoding matrix
required by the first optimization.

## Building

To build mfgen command line utility, run:
```
make mfgen
```
To build the mftok API, run:
```
make mfapi
```
To build the mftok command line utility along with the API, run:
```
make mftok
```

The resulting executables and/or object files will be situated inside `build/`.
